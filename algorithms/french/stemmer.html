<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">
    <title>French stemming algorithm - Snowball</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="/styles.css" rel="stylesheet">
  </head>

  <body>

    <!-- Static navbar -->
    <nav class="navbar navbar-light bg-light navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand float-left" href="/"><img src="/snub-dodecahedron.gif" alt="Snowball Logo" style="margin: 4px; height: 42px;"> Snowball</a>
          <span id="forkongithub"><a href="https://github.com/snowballstem/snowball">Fork me on GitHub</a></span>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="col-lg-2">
          
        </div>
        <div class="col-lg-10">
          <h1>French stemming algorithm</h1>


<h2>Links to resources</h2>

<ul>
<li> <A HREF="/algorithms/romance.html">Romance language stemmers</A>
<li> <a href="https://en.wikipedia.org/wiki/French_language">French language</a> on Wikipedia</li>
</ul>

<p>
Here is a sample of French vocabulary, with the stemmed forms that will be generated by this algorithm:
</p>

<div style="background-color:lightpink">
<TABLE CELLPADDING=0>
<TR><TD>  <B>word</B> </TD>
 <TD></TD><TD> </TD>
 <TD></TD><TD> <B>stem</B> </TD>
 <TD></TD><TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
 <TD></TD><TD> <B>word</B> </TD>
 <TD></TD><TD> </TD>
 <TD></TD><TD> <B>stem</B> </TD>
</TR>

<TR><TD>
continu<BR>
continua<BR>
continuait<BR>
continuant<BR>
continuation<BR>
continue<BR>
continuel<BR>
continuelle<BR>
continuellement<BR>
continuelles<BR>
continuels<BR>
continuer<BR>
continuera<BR>
continuerait<BR>
continueront<BR>
continuez<BR>
continuité<BR>
continuons<BR>
continué<BR>
contorsions<BR>
contour<BR>
contournait<BR>
contournant<BR>
contourne<BR>
contours<BR>
contractait<BR>
contracter<BR>
contractions<BR>
contracté<BR>
contractée<BR>
contractés<BR>
contradictoirement<BR>
contradictoires<BR>
contraindre<BR>
contraint<BR>
contrainte<BR>
contraintes<BR>
contraire<BR>
contraires<BR>
contraria<BR>
</TD>
<TD></TD><TD> <b>&#x21d2;</b> </TD>
<TD></TD><TD>
continu<BR>
continu<BR>
continu<BR>
continu<BR>
continu<BR>
continu<BR>
continuel<BR>
continuel<BR>
continuel<BR>
continuel<BR>
continuel<BR>
continu<BR>
continu<BR>
continu<BR>
continu<BR>
continu<BR>
continu<BR>
continuon<BR>
continu<BR>
contors<BR>
contour<BR>
contourn<BR>
contourn<BR>
contourn<BR>
contour<BR>
contract<BR>
contract<BR>
contract<BR>
contract<BR>
contract<BR>
contract<BR>
contradictoir<BR>
contradictoir<BR>
contraindr<BR>
contraint<BR>
contraint<BR>
contraint<BR>
contrair<BR>
contrair<BR>
contrari<BR>
</TD>
<TD></TD><TD> </TD>
<TD></TD><TD>
main<BR>
mains<BR>
maintenaient<BR>
maintenait<BR>
maintenant<BR>
maintenir<BR>
maintenue<BR>
maintien<BR>
maintint<BR>
maire<BR>
maires<BR>
mairie<BR>
mais<BR>
maison<BR>
maisons<BR>
maistre<BR>
maitre<BR>
majestueuse<BR>
majestueusement<BR>
majestueux<BR>
majesté<BR>
majeur<BR>
majeure<BR>
major<BR>
majordome<BR>
majordomes<BR>
majorité<BR>
majorités<BR>
mal<BR>
malacca<BR>
malade<BR>
malades<BR>
maladie<BR>
maladies<BR>
maladive<BR>
maladresse<BR>
maladresses<BR>
maladroit<BR>
maladroite<BR>
maladroitement<BR>
</TD>
<TD></TD><TD> <b>&#x21d2;</b> </TD>
<TD></TD><TD>
main<BR>
main<BR>
mainten<BR>
mainten<BR>
mainten<BR>
mainten<BR>
maintenu<BR>
maintien<BR>
maintint<BR>
mair<BR>
mair<BR>
mair<BR>
mais<BR>
maison<BR>
maison<BR>
maistr<BR>
maitr<BR>
majestu<BR>
majestu<BR>
majestu<BR>
majest<BR>
majeur<BR>
majeur<BR>
major<BR>
majordom<BR>
majordom<BR>
major<BR>
major<BR>
mal<BR>
malacc<BR>
malad<BR>
malad<BR>
malad<BR>
malad<BR>
malad<BR>
maladress<BR>
maladress<BR>
maladroit<BR>
maladroit<BR>
maladroit<BR>
</TD>
</TR>
</TABLE>
</div>

<h2>Design Notes</h2>

<p>
In French the verb endings <B><I>-ent</I></B> and <B><I>-ons</I></B> cannot be removed without
unacceptable overstemming (of <i>accident</i> and <i>garçons</i> for example).
The <B><I>-ons</I></B> form is rarer, but <B><I>-ent</I></B> forms
are quite common, and will appear regularly throughout a stemmed vocabulary.
</p>

<p>
The rule to replace <b><i>-oux</i></b> with <b><i>-ou</i></b> will produce linguistically
incorrect stems by removing <b><i>x</i></b> from <b><i>époux</i></b> and
<b><i>jaloux</i></b>, but this is harmless as no unwanted conflation results.
</p>

<p>
The rule to replace <b><i>-aux</i></b> with <b><i>-al</i></b> stems
<b><i>travaux</i></b> to <b><i>traval</i></b> and <b><i>vitraux</i></b> to
<b><i>vitral</i></b> wheras <b><i>-ail</i></b> would be lingusitically correct;
similarly <b><i>esquimaux</i></b>, <b><i>noyaux</i></b> and
<b><i>tuyaux</i></b> where <b><i>-au</i></b> would be more correct. None of
these seem to result in unwanted conflation though.
</p>

<p>
The suffix <b><i>-eux</i></b> is removed if in R2.  For a few short words
(<b><i>cheveux</i></b>, <b><i>jeux</i></b>, <b><i>lieux</i></b> and
<b><i>neveux</i></b>) removing <b><i>-x</i></b> would conflate a plural
form with its singular, but the complexity of the rule needed to avoid
adversely affecting other short words ending <b><i>-eux</i></b> does not
seem justified for just four cases of understemming.
</p>

<h2>The stemming algorithm</h2>

<p>
Letters in French include the following accented forms,
</p>

<DL><DD>
    <B><I>â  &nbsp;  à  &nbsp;  ç  &nbsp;  ë  &nbsp;  é  &nbsp;  ê  &nbsp;  è  &nbsp;  ï  &nbsp;  î  &nbsp;  ô  &nbsp;  û  &nbsp;  ù</I></B>
</DL>

<p>
The following letters are vowels:
</p>

<DL><DD>
    <B><I>a  &nbsp;  e  &nbsp;  i  &nbsp;  o  &nbsp;  u  &nbsp;  y  &nbsp;  â  &nbsp;  à  &nbsp;  ë  &nbsp;  é  &nbsp;  ê  &nbsp;  è  &nbsp;  ï  &nbsp;  î  &nbsp;  ô  &nbsp;  û  &nbsp;  ù</I></B>
</DL>

<p>
The first step removes elisions.  If the word starts with one of
<b><i>c</i></b> <b><i>d</i></b> <b><i>j</i></b> <b><i>l</i></b> <b><i>m</i></b> <b><i>n</i></b> <b><i>s</i></b> <b><i>t</i></b>
or <b><i>qu</i></b>, followed by an apostrophe (<b><i>'</i></b>) which is not
at the end of the word, then remove from the prefix of the word up to and
including this apostrophe.
</p>

<p>
Assume the word is in lower case.  Then, taking the letters in turn from the
beginning to end of the word, put <b><i>u</i></b> or <b><i>i</i></b> into upper
case when it is both preceded and followed by a vowel; put <b><i>y</i></b> into
upper case when it is either preceded or followed by a vowel; and put <b><i>u</i></b> into upper case when it follows <b><i>q</i></b>. For example,
</p>

<DL><DD><TABLE CELLPADDING=0>
<TR><TD>    jouer   <TD></TD><TD> &#x2192; <TD></TD><TD>  joUer
<TR><TD>    ennuie  <TD></TD><TD> &#x2192; <TD></TD><TD>  ennuIe
<TR><TD>    yeux    <TD></TD><TD> &#x2192; <TD></TD><TD>  Yeux
<TR><TD>    quand   <TD></TD><TD> &#x2192; <TD></TD><TD>  qUand
<TR><TD>    croyiez <TD></TD><TD> &#x2192; <TD></TD><TD>  croYiez
</TABLE></DL>

<p>
In the last example, <b><i>y</i></b> becomes <b><i>Y</i></b> because it is
between two vowels, but <b><i>i</i></b> does not become <b><i>I</i></b> because
it is between <b><i>Y</i></b> and <b><i>e</i></b>, and <b><i>Y</i></b> is not
defined as a vowel above.
</p>

<p>
(The upper case forms are not then classed as vowels &#x2014; see <A HREF="../../texts/vowelmarking.html">note</A> on vowel
marking.)
</p>

<p>
Replace <B><I>ë</I></B> and <B><I>ï</I></B> with <B><I>He</I></B> and <B><I>Hi</I></B>. The <B><I>H</I></B>
marks the vowel as having originally had a diaeresis, while the vowel itself, lacking an accent, is able to
match suffixes beginning in <B><I>e</I></B> or <B><I>i</I></B>.
</p>

<p>
<I>RV</I> is defined as the region to the right of the first of these
which is true (the examples show <i>RV</i> underlined):
</p>
<ol>
<li>The word starts with two vowels followed by another letter - e.g. <i>aim<u>er</u></i></li>
<li>The word starts <b><i>par</i></b></li> - e.g. <i>par<u>ie</u></i>
<li>The word starts <b><i>col</i></b></li> - e.g. <i>col<u>is</u></i>
<li>The word starts <b><i>tap</i></b></li> - e.g. <i>tap<u>is</u></i>
<li>The word starts <b><i>ni</i></b> followed by any vowel</li> - e.g. <i>nia<u>ises</u></i>
<li>The first vowel not at the beginning of the word</li> - e.g. <i>ador<u>er</u></i>, <i>vol<u>er</u></i>
<li>The end of the word - e.g. <i>arcs</i> (RV is an empty region at the end of the word)</li>
</ol>

<p>
<I>R</I>1 is the region after the first non-vowel following a vowel, or the end of
the word if there is no such non-vowel.
</p>

<p>
<I>R</I>2 is the region after the first non-vowel following a vowel in <I>R</I>1, or the
end of the word if there is no such non-vowel.
(See <A HREF="../../texts/r1r2.html">note</A> on <I>R</I>1 and <I>R</I>2.)
</p>

<p>
For example:
</p>

<PRE>
    f a m e u s e m e n t
         |......R1.......|
               |...R2....|
</PRE>

<p>
Note that <I>R</I>1 can contain <I>RV</I> (<I>adorer</I>), and <I>RV</I> can contain <I>R</I>1 (<I>voler</I>).
</p>

<p>
Below, &#8216;delete if in <I>R</I>2&#8217; means that a found suffix should be removed if it
lies entirely in <I>R</I>2, but not if it overlaps <I>R</I>2 and the rest of the word.
&#8216;delete if in <I>R</I>1 and preceded by <I>X</I>&#8217; means that <I>X</I> itself does not have to
come in <I>R</I>1, while &#8216;delete if preceded by <I>X</I> in <I>R</I>1&#8217; means that <I>X</I>, like the
suffix, must be entirely in <I>R</I>1.
</p>

<p>
Start with step 1
</p>

<p>
Step 1: Standard suffix removal
<DL><DD>
    Search for the longest among the following suffixes, and perform the
    action indicated.
<DL>
    <DT><B><I>ance  &nbsp;  iqUe  &nbsp;  isme  &nbsp;  able  &nbsp;  iste  &nbsp;  eux  &nbsp;  ances  &nbsp;  iqUes  &nbsp;  ismes  &nbsp;  ables  &nbsp;  istes</I></B>
        <DD>delete if in <I>R</I>2
    <DT><B><I>atrice  &nbsp;  ateur  &nbsp;  ation  &nbsp;  atrices  &nbsp;  ateurs  &nbsp;  ations</I></B>
        <DD>delete if in <I>R</I>2
        <DD>if preceded by <B><I>ic</I></B>, delete if in <I>R</I>2, else replace by <B><I>iqU</I></B>
    <DT><B><I>logie  &nbsp;  logies</I></B>
        <DD>replace with <B><I>log</I></B> if in <I>R</I>2
    <DT><B><I>usion  &nbsp;  ution  &nbsp;  usions  &nbsp;  utions</I></B>
        <DD>replace with <B><I>u</I></B> if in <I>R</I>2
    <DT><B><I>ence  &nbsp;  ences</I></B>
        <DD>replace with <B><I>ent</I></B> if in <I>R</I>2
    <DT><B><I>ement  &nbsp;  ements</I></B>
        <DD>delete if in <I>RV</I>
        <DD>if preceded by <B><I>iv</I></B>, delete if in <I>R</I>2 (and if further preceded by <B><I>at</I></B>,
        delete if in <I>R</I>2), otherwise,
        <DD>if preceded by <B><I>eus</I></B>, delete if in <I>R</I>2, else replace by <B><I>eux</I></B>
          if in <I>R</I>1, otherwise,
        <DD>if preceded by <B><I>abl</I></B> or <B><I>iqU</I></B>, delete if in <I>R</I>2, otherwise,
        <DD>if preceded by <B><I>ièr</I></B> or <B><I>Ièr</I></B>, replace by <B><I>i</I></B> if in <I>RV</I>
    <DT><B><I>ité  &nbsp;  ités</I></B>
        <DD>delete if in <I>R</I>2
        <DD>if preceded by <B><I>abil</I></B>, delete if in <I>R</I>2, else replace by <B><I>abl</I></B>,
        otherwise,
        <DD>if preceded by <B><I>ic</I></B>, delete if in <I>R</I>2, else replace by <B><I>iqU</I></B>, otherwise,
        <DD>if preceded by <B><I>iv</I></B>, delete if in <I>R</I>2
    <DT><B><I>if  &nbsp;  ive  &nbsp;  ifs  &nbsp;  ives</I></B>
        <DD>delete if in <I>R</I>2
        <DD>if preceded by <B><I>at</I></B>, delete if in <I>R</I>2 (and if further preceded by <B><I>ic</I></B>,
        delete if in <I>R</I>2, else replace by <B><I>iqU</I></B>)
    <DT><B><I>eaux</I></B>
        <DD>replace with <B><I>eau</I></B>
    <DT><B><I>aux</I></B>
        <DD>replace with <B><I>al</I></B> if in <I>R</I>1
    <DT><B><I>oux</I></B>
        <DD>replace with <B><I>ou</I></B> if preceded by one of
            <b><i>b</i></b> &nbsp; <b><i>h</i></b> &nbsp; <b><i>j</i></b> &nbsp;
            <b><i>l</i></b> &nbsp; <b><i>n</i></b> &nbsp; <b><i>p</i></b>
    <DT><B><I>euse  &nbsp;  euses</I></B>
        <DD>delete if in <I>R</I>2, else replace by <B><I>eux</I></B> if in <I>R</I>1
    <DT><B><I>issement  &nbsp;  issements</I></B>
        <DD>delete if in <I>R</I>1 and preceded by a non-vowel
    <DT><B><I>amment</I></B>
        <DD>replace with <B><I>ant</I></B> if in <I>RV</I>
    <DT><B><I>emment</I></B>
        <DD>replace with <B><I>ent</I></B> if in <I>RV</I>
    <DT><B><I>ment  &nbsp;  ments</I></B>
        <DD>delete if preceded by a vowel in <I>RV</I>
</DL>
</DL>

<p>
Do step 2<I>a</I> if either no ending was removed by step 1, or if one of endings
<B><I>amment</I></B>, <B><I>emment</I></B>, <B><I>ment</I></B>, <B><I>ments</I></B> was found.
</p>

<p>
Step 2<I>a</I>: Verb suffixes beginning <B><I>i</I></B>
</p>

<DL><DD>
    Search for the longest among the following suffixes in RV and if found,
    delete if the preceding character is also in RV and is neither a vowel nor <B><I>H</I></B>.
<DL><DD>
        <B><I>îmes  &nbsp;  ît  &nbsp;  îtes  &nbsp;  i  &nbsp;  ie  &nbsp;  ies  &nbsp;  ir  &nbsp;  ira  &nbsp;  irai  &nbsp;  iraIent  &nbsp;  irais  &nbsp;  irait  &nbsp;  iras
         &nbsp;  irent  &nbsp;  irez  &nbsp;  iriez  &nbsp;  irions  &nbsp;  irons  &nbsp;  iront  &nbsp;  is  &nbsp;  issaIent  &nbsp;  issais  &nbsp;  issait
         &nbsp;  issant  &nbsp;  issante  &nbsp;  issantes  &nbsp;  issants  &nbsp;  isse  &nbsp;  issent  &nbsp;  isses  &nbsp;  issez  &nbsp;  issiez
         &nbsp;  issions  &nbsp;  issons  &nbsp;  it</I></B>
</DL>
</DL>

<p>
Do step 2<I>b</I> if step 2<I>a</I> was done, but failed to remove a suffix.
</p>

<p>
Step 2<I>b</I>: Other verb suffixes
</p>

<DL><DD>
    Search for the longest among the following suffixes in RV, and perform the
    action indicated.
<DL>
    <DT><B><I>ions</I></B>
        <DD>delete if in <I>R</I>2
    <DT><B><I>é  &nbsp;  ée  &nbsp;  ées  &nbsp;  és  &nbsp;  èrent  &nbsp;  er  &nbsp;  era  &nbsp;  erai  &nbsp;  eraIent  &nbsp;  erais  &nbsp;  erait  &nbsp;  eras  &nbsp;  erez
     &nbsp;  eriez  &nbsp;  erions  &nbsp;  erons  &nbsp;  eront  &nbsp;  ez  &nbsp;  iez</I></B>
        <DD>delete
    <DT><B><I>âmes  &nbsp;  ât  &nbsp;  âtes  &nbsp;  a  &nbsp;  ai  &nbsp;  aIent  &nbsp;  ait  &nbsp;  ant  &nbsp;  ante  &nbsp;  antes  &nbsp;  ants  &nbsp;  as  &nbsp;  asse
     &nbsp;  assent  &nbsp;  asses  &nbsp;  assiez  &nbsp;  assions</I></B>
        <DD>delete
        <DD>if preceded by <B><I>e</I></B> which is also in RV, delete the <b><i>e</i></b> as well
    <DT><B><I>ais  &nbsp;  aise  &nbsp;  aises</I></B>
        <DD>delete unless preceded by one of: <b><i>al</i></b> preceded by exactly one character, <b><i>auv</i></b>, <b><i>épl</i></b>
</DL>
</DL>

<p>
If the last step to be obeyed &#x2014; either step 1, 2<I>a</I> or 2<I>b</I> &#x2014; altered the word,
do step 3
</p>

<p>
Step 3
</p>
<DL><DD>
    Replace final <B><I>Y</I></B> with <B><I>i</I></B> or final <B><I>ç</I></B> with <B><I>c</I></B>
</DL>
<p>
Alternatively, if the last step to be obeyed did not alter the word, do
step 4
</p>

<p>
Step 4: Residual suffix
</p>

<DL><DD>
    <p>
    If the word ends <B><I>s</I></B>, not preceded by <B><I>a</I></B>, <B><I>i</I></B> (unless itself preceded by <B><I>H</I></B>), <B><I>o</I></B>, <B><I>u</I></B>, <B><I>è</I></B> or <B><I>s</I></B>, delete it.
    </p>

    <p>
    In the rest of step 4, all tests are confined to the <I>RV</I> region.
    </p>

    <p>
    Search for the longest among the following suffixes, and perform the
    action indicated.
    </p>

<DL>
    <DT><B><I>ion</I></B>
        <DD>delete if in <I>R</I>2 and preceded by <B><I>s</I></B> or <B><I>t</I></B>
    <DT><B><I>ier  &nbsp;  ière  &nbsp;  Ier  &nbsp;  Ière</I></B>
        <DD>replace with <B><I>i</I></B>
    <DT><B><I>e</I></B>
        <DD>delete
</DL>
<BR>
    (So note that <B><I>ion</I></B> is removed only when it is in <I>R</I>2 &#x2014; as well as being
    in <I>RV</I> &#x2014; and preceded by <B><I>s</I></B> or <B><I>t</I></B> which must be in <I>RV</I>.)
</DL>

<p>
Always do steps 5 and 6.
</p>

<p>
Step 5: Undouble
</p>

<DL><DD>
    If the word ends <B><I>enn</I></B>, <B><I>onn</I></B>, <B><I>ett</I></B>, <B><I>ell</I></B> or <B><I>eill</I></B>, delete the last letter
</DL>

<p>
Step 6: Un-accent
</p>

<DL><DD>
    If the words ends <B><I>é</I></B> or <B><I>è</I></B> followed by at least one non-vowel, remove
    the accent from the <B><I>e</I></B>.
</DL>

<p>
And finally:
</p>

<DL><DD>
    <p>
    Turn any remaining <B><I>I</I></B>, <B><I>U</I></B> and <B><I>Y</I></B> letters in the word back into lower case.
    </p>

    <p>
    Turn <B><I>He</I></B> and <B><I>Hi</I></B> back into <B><I>ë</I></B> and <B><I>ï</I></B>, and remove any
    remaining <B><I>H</I></B>.
    </p>
</DL>

<h2>History of functional changes to the algorithm</h2>

<ul>
<li>September 2002: New rule for <i>-ièr</i>
<li>Snowball 2.0.0: Suffixes that begin with a diaereses are now removed
(done by replacing <B><I>ë</I></B> and <B><I>ï</I></B> with <B><I>He</I></B> and <B><I>Hi</I></B>, during stemming then undoing afterwards).</li>
<li>Snowball 3.0.0: Added a new first step which removes elisions.</li>
<li>Snowball 3.0.0: Added rule to replace <b><i>-oux</i></b> with <b><i>-ou</i></b>.</li>
<li>Snowball 3.0.0: Added RV exceptions for <b><i>ni</i></b> followed by a vowel.</li>
<li>Snowball 3.0.0: Restrict removal of <b><i>-ais</i></b>; remove <b><i>-aise</i></b> and <b><i>-aises</i></b>.</li>
</ul>

<h2>The same algorithm in Snowball</h2>

<div class="highlight"><pre><span class="kr">routines</span><span class="w"> </span><span class="p">(</span>
<span class="w">           </span><span class="n">elisions</span>
<span class="w">           </span><span class="n">prelude</span><span class="w"> </span><span class="n">postlude</span><span class="w"> </span><span class="n">mark_regions</span>
<span class="w">           </span><span class="n">RV</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="n">R2</span>
<span class="w">           </span><span class="n">standard_suffix</span>
<span class="w">           </span><span class="n">i_verb_suffix</span>
<span class="w">           </span><span class="n">verb_suffix</span>
<span class="w">           </span><span class="n">residual_suffix</span>
<span class="w">           </span><span class="n">un_double</span>
<span class="w">           </span><span class="n">un_accent</span>
<span class="p">)</span>

<span class="kr">externals</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">stem</span><span class="w"> </span><span class="p">)</span>

<span class="kr">integers</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">pV</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="p">)</span>

<span class="kr">groupings</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">elision_char</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">keep_with_s</span><span class="w"> </span><span class="n">oux_ending</span><span class="w"> </span><span class="p">)</span>

<span class="kr">stringescapes</span><span class="w"> </span><span class="se">{}</span>

<span class="cm">/* special characters */</span>

<span class="kr">stringdef</span><span class="w"> </span><span class="se">a^</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00E2}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// a-circumflex</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">a`</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00E0}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// a-grave</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">cc</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00E7}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// c-cedilla</span>

<span class="kr">stringdef</span><span class="w"> </span><span class="se">e&quot;</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00EB}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// e-diaeresis (rare)</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">e&#39;</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00E9}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// e-acute</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">e^</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00EA}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// e-circumflex</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">e`</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00E8}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// e-grave</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">i&quot;</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00EF}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// i-diaeresis</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">i^</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00EE}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// i-circumflex</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">o^</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00F4}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// o-circumflex</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">u^</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00FB}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// u-circumflex</span>
<span class="kr">stringdef</span><span class="w"> </span><span class="se">u`</span><span class="w">   </span><span class="s1">&#39;</span><span class="se">{U+00F9}</span><span class="s1">&#39;</span><span class="w">  </span><span class="c1">// u-grave</span>

<span class="kr">define</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="s1">&#39;aeiouy</span><span class="se">{a^}{a`}{e&quot;}{e&#39;}{e^}{e`}{i&quot;}{i^}{o^}{u^}{u`}</span><span class="s1">&#39;</span>

<span class="c1">// Replace -oux with -ou if preceded by one of these letters.</span>
<span class="kr">define</span><span class="w"> </span><span class="n">oux_ending</span><span class="w"> </span><span class="s1">&#39;bhjlnp&#39;</span>

<span class="c1">// Single character elisions</span>
<span class="kr">define</span><span class="w"> </span><span class="n">elision_char</span><span class="w"> </span><span class="s1">&#39;cdjlmnst&#39;</span>

<span class="kr">define</span><span class="w"> </span><span class="n">elisions</span><span class="w"> </span><span class="kr">as</span>
<span class="p">(</span>
<span class="w">    </span><span class="o">[</span><span class="w"> </span><span class="p">(</span><span class="n">elision_char</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;qu&#39;</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{&#39;}</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">atlimit</span><span class="w"> </span><span class="ow">delete</span>
<span class="p">)</span>

<span class="kr">define</span><span class="w"> </span><span class="n">prelude</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="ow">repeat</span><span class="w"> </span><span class="ow">goto</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="p">(</span><span class="w">  </span><span class="n">v</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;u&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;U&#39;</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span>
<span class="w">           </span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;I&#39;</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span>
<span class="w">           </span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="ow">or</span>
<span class="w">    </span><span class="p">(</span><span class="w">  </span><span class="o">[</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e&quot;}</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;He&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="ow">or</span>
<span class="w">    </span><span class="p">(</span><span class="w">  </span><span class="o">[</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{i&quot;}</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;Hi&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="ow">or</span>
<span class="w">    </span><span class="p">(</span><span class="w">  </span><span class="o">[</span><span class="s1">&#39;y&#39;</span><span class="o">]</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;Y&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="ow">or</span>
<span class="w">    </span><span class="p">(</span><span class="w">  </span><span class="s1">&#39;q&#39;</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;u&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;U&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="p">)</span>

<span class="kr">define</span><span class="w"> </span><span class="n">mark_regions</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="o">$</span><span class="n">pV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">limit</span>
<span class="w">    </span><span class="o">$</span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">limit</span>
<span class="w">    </span><span class="o">$</span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">limit</span><span class="w">  </span><span class="c1">// defaults</span>

<span class="w">    </span><span class="ow">do</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">(</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">next</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="ow">or</span>
<span class="w">        </span><span class="kr">among</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="c1">// Exception list:</span>
<span class="w">            </span><span class="s1">&#39;par&#39;</span><span class="w">    </span><span class="c1">// paris, parie, pari</span>
<span class="w">            </span><span class="s1">&#39;col&#39;</span><span class="w">    </span><span class="c1">// colis</span>
<span class="w">            </span><span class="s1">&#39;tap&#39;</span><span class="w">    </span><span class="c1">// tapis</span>
<span class="w">                </span><span class="p">()</span>
<span class="w">            </span><span class="s1">&#39;ni&#39;</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="c1">// niais/nierais/nié/niâmes/nièrent</span>
<span class="w">            </span><span class="c1">// extensions possible here</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="ow">or</span>
<span class="w">        </span><span class="p">(</span><span class="w"> </span><span class="ow">next</span><span class="w"> </span><span class="ow">gopast</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="ow">setmark</span><span class="w"> </span><span class="n">pV</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="ow">do</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="ow">gopast</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">gopast</span><span class="w"> </span><span class="ow">non</span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="ow">setmark</span><span class="w"> </span><span class="n">p1</span>
<span class="w">        </span><span class="ow">gopast</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">gopast</span><span class="w"> </span><span class="ow">non</span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="ow">setmark</span><span class="w"> </span><span class="n">p2</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">)</span>

<span class="kr">define</span><span class="w"> </span><span class="n">postlude</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="ow">repeat</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="w"> </span><span class="kr">among</span><span class="p">(</span>
<span class="w">        </span><span class="s1">&#39;I&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;i&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="s1">&#39;U&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;u&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="s1">&#39;Y&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="s1">&#39;He&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e&quot;}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="s1">&#39;Hi&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{i&quot;}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="s1">&#39;H&#39;</span><span class="w"> </span><span class="p">(</span><span class="ow">delete</span><span class="p">)</span>
<span class="w">        </span><span class="s1">&#39;&#39;</span><span class="w">  </span><span class="p">(</span><span class="ow">next</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">)</span>

<span class="kr">backwardmode</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">RV</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="o">$</span><span class="n">pV</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">cursor</span>
<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">R1</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="o">$</span><span class="n">p1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">cursor</span>
<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="o">$</span><span class="n">p2</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">cursor</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">standard_suffix</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="w"> </span><span class="kr">among</span><span class="p">(</span>

<span class="w">            </span><span class="s1">&#39;ance&#39;</span><span class="w"> </span><span class="s1">&#39;iqUe&#39;</span><span class="w"> </span><span class="s1">&#39;isme&#39;</span><span class="w"> </span><span class="s1">&#39;able&#39;</span><span class="w"> </span><span class="s1">&#39;iste&#39;</span><span class="w"> </span><span class="s1">&#39;eux&#39;</span>
<span class="w">            </span><span class="s1">&#39;ances&#39;</span><span class="w"> </span><span class="s1">&#39;iqUes&#39;</span><span class="w"> </span><span class="s1">&#39;ismes&#39;</span><span class="w"> </span><span class="s1">&#39;ables&#39;</span><span class="w"> </span><span class="s1">&#39;istes&#39;</span>
<span class="w">               </span><span class="p">(</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;atrice&#39;</span><span class="w"> </span><span class="s1">&#39;ateur&#39;</span><span class="w"> </span><span class="s1">&#39;ation&#39;</span>
<span class="w">            </span><span class="s1">&#39;atrices&#39;</span><span class="w"> </span><span class="s1">&#39;ateurs&#39;</span><span class="w"> </span><span class="s1">&#39;ations&#39;</span>
<span class="w">               </span><span class="p">(</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span>
<span class="w">                 </span><span class="ow">try</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;ic&#39;</span><span class="o">]</span><span class="w"> </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">&lt;-</span><span class="s1">&#39;iqU&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">               </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;logie&#39;</span>
<span class="w">            </span><span class="s1">&#39;logies&#39;</span>
<span class="w">               </span><span class="p">(</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;log&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;usion&#39;</span><span class="w"> </span><span class="s1">&#39;ution&#39;</span>
<span class="w">            </span><span class="s1">&#39;usions&#39;</span><span class="w"> </span><span class="s1">&#39;utions&#39;</span>
<span class="w">               </span><span class="p">(</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;u&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;ence&#39;</span>
<span class="w">            </span><span class="s1">&#39;ences&#39;</span>
<span class="w">               </span><span class="p">(</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;ent&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;ement&#39;</span>
<span class="w">            </span><span class="s1">&#39;ements&#39;</span>
<span class="w">            </span><span class="p">(</span>
<span class="w">                </span><span class="n">RV</span><span class="w"> </span><span class="ow">delete</span>
<span class="w">                </span><span class="ow">try</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="w"> </span><span class="kr">among</span><span class="p">(</span>
<span class="w">                        </span><span class="s1">&#39;iv&#39;</span><span class="w">   </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;at&#39;</span><span class="o">]</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>
<span class="w">                        </span><span class="s1">&#39;eus&#39;</span><span class="w">  </span><span class="p">((</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">(</span><span class="n">R1</span><span class="o">&lt;-</span><span class="s1">&#39;eux&#39;</span><span class="p">))</span>
<span class="w">                        </span><span class="s1">&#39;abl&#39;</span><span class="w"> </span><span class="s1">&#39;iqU&#39;</span>
<span class="w">                               </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>
<span class="w">                        </span><span class="s1">&#39;i</span><span class="se">{e`}</span><span class="s1">r&#39;</span><span class="w"> </span><span class="s1">&#39;I</span><span class="se">{e`}</span><span class="s1">r&#39;</span>
<span class="w">                               </span><span class="p">(</span><span class="n">RV</span><span class="w"> </span><span class="o">&lt;-</span><span class="s1">&#39;i&#39;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;it</span><span class="se">{e&#39;}</span><span class="s1">&#39;</span>
<span class="w">            </span><span class="s1">&#39;it</span><span class="se">{e&#39;}</span><span class="s1">s&#39;</span>
<span class="w">            </span><span class="p">(</span>
<span class="w">                </span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span>
<span class="w">                </span><span class="ow">try</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="w"> </span><span class="kr">among</span><span class="p">(</span>
<span class="w">                        </span><span class="s1">&#39;abil&#39;</span><span class="w"> </span><span class="p">((</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">&lt;-</span><span class="s1">&#39;abl&#39;</span><span class="p">)</span>
<span class="w">                        </span><span class="s1">&#39;ic&#39;</span><span class="w">   </span><span class="p">((</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">&lt;-</span><span class="s1">&#39;iqU&#39;</span><span class="p">)</span>
<span class="w">                        </span><span class="s1">&#39;iv&#39;</span><span class="w">   </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;if&#39;</span><span class="w"> </span><span class="s1">&#39;ive&#39;</span>
<span class="w">            </span><span class="s1">&#39;ifs&#39;</span><span class="w"> </span><span class="s1">&#39;ives&#39;</span>
<span class="w">            </span><span class="p">(</span>
<span class="w">                </span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span>
<span class="w">                </span><span class="ow">try</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;at&#39;</span><span class="o">]</span><span class="w"> </span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;ic&#39;</span><span class="o">]</span><span class="w"> </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">&lt;-</span><span class="s1">&#39;iqU&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;eaux&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;eau&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;aux&#39;</span><span class="w">  </span><span class="p">(</span><span class="n">R1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;al&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;oux&#39;</span><span class="w">  </span><span class="p">(</span><span class="n">oux_ending</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;ou&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;euse&#39;</span>
<span class="w">            </span><span class="s1">&#39;euses&#39;</span><span class="p">((</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">(</span><span class="n">R1</span><span class="o">&lt;-</span><span class="s1">&#39;eux&#39;</span><span class="p">))</span>

<span class="w">            </span><span class="s1">&#39;issement&#39;</span>
<span class="w">            </span><span class="s1">&#39;issements&#39;</span><span class="p">(</span><span class="n">R1</span><span class="w"> </span><span class="ow">non</span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span><span class="w"> </span><span class="c1">// verbal</span>

<span class="w">            </span><span class="c1">// fail(...) below forces entry to verb_suffix. -ment typically</span>
<span class="w">            </span><span class="c1">// follows the p.p., e.g &#39;confus{e&#39;}ment&#39;.</span>

<span class="w">            </span><span class="s1">&#39;amment&#39;</span><span class="w">   </span><span class="p">(</span><span class="n">RV</span><span class="w"> </span><span class="ow">fail</span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;ant&#39;</span><span class="p">))</span>
<span class="w">            </span><span class="s1">&#39;emment&#39;</span><span class="w">   </span><span class="p">(</span><span class="n">RV</span><span class="w"> </span><span class="ow">fail</span><span class="p">(</span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;ent&#39;</span><span class="p">))</span>
<span class="w">            </span><span class="s1">&#39;ment&#39;</span>
<span class="w">            </span><span class="s1">&#39;ments&#39;</span><span class="w">    </span><span class="p">(</span><span class="ow">test</span><span class="p">(</span><span class="n">v</span><span class="w"> </span><span class="n">RV</span><span class="p">)</span><span class="w"> </span><span class="ow">fail</span><span class="p">(</span><span class="ow">delete</span><span class="p">))</span>
<span class="w">                       </span><span class="c1">// v is e,i,u,{e&#39;},I or U</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">i_verb_suffix</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="ow">setlimit</span><span class="w"> </span><span class="ow">tomark</span><span class="w"> </span><span class="n">pV</span><span class="w"> </span><span class="ow">for</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="w"> </span><span class="kr">among</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="s1">&#39;</span><span class="se">{i^}</span><span class="s1">mes&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{i^}</span><span class="s1">t&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{i^}</span><span class="s1">tes&#39;</span><span class="w"> </span><span class="s1">&#39;i&#39;</span><span class="w"> </span><span class="s1">&#39;ie&#39;</span><span class="w"> </span><span class="s1">&#39;ies&#39;</span><span class="w"> </span><span class="s1">&#39;ir&#39;</span><span class="w"> </span><span class="s1">&#39;ira&#39;</span><span class="w"> </span><span class="s1">&#39;irai&#39;</span>
<span class="w">            </span><span class="s1">&#39;iraIent&#39;</span><span class="w"> </span><span class="s1">&#39;irais&#39;</span><span class="w"> </span><span class="s1">&#39;irait&#39;</span><span class="w"> </span><span class="s1">&#39;iras&#39;</span><span class="w"> </span><span class="s1">&#39;irent&#39;</span><span class="w"> </span><span class="s1">&#39;irez&#39;</span><span class="w"> </span><span class="s1">&#39;iriez&#39;</span>
<span class="w">            </span><span class="s1">&#39;irions&#39;</span><span class="w"> </span><span class="s1">&#39;irons&#39;</span><span class="w"> </span><span class="s1">&#39;iront&#39;</span><span class="w"> </span><span class="s1">&#39;is&#39;</span><span class="w"> </span><span class="s1">&#39;issaIent&#39;</span><span class="w"> </span><span class="s1">&#39;issais&#39;</span><span class="w"> </span><span class="s1">&#39;issait&#39;</span>
<span class="w">            </span><span class="s1">&#39;issant&#39;</span><span class="w"> </span><span class="s1">&#39;issante&#39;</span><span class="w"> </span><span class="s1">&#39;issantes&#39;</span><span class="w"> </span><span class="s1">&#39;issants&#39;</span><span class="w"> </span><span class="s1">&#39;isse&#39;</span><span class="w"> </span><span class="s1">&#39;issent&#39;</span><span class="w"> </span><span class="s1">&#39;isses&#39;</span>
<span class="w">            </span><span class="s1">&#39;issez&#39;</span><span class="w"> </span><span class="s1">&#39;issiez&#39;</span><span class="w"> </span><span class="s1">&#39;issions&#39;</span><span class="w"> </span><span class="s1">&#39;issons&#39;</span><span class="w"> </span><span class="s1">&#39;it&#39;</span>
<span class="w">                </span><span class="p">(</span><span class="ow">not</span><span class="w"> </span><span class="s1">&#39;H&#39;</span><span class="w"> </span><span class="ow">non</span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">verb_suffix</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="ow">setlimit</span><span class="w"> </span><span class="ow">tomark</span><span class="w"> </span><span class="n">pV</span><span class="w"> </span><span class="ow">for</span><span class="w"> </span><span class="p">(</span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="p">)</span>
<span class="w">        </span><span class="kr">among</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="s1">&#39;ions&#39;</span>
<span class="w">                </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>

<span class="w">            </span><span class="s1">&#39;</span><span class="se">{e&#39;}</span><span class="s1">&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e&#39;}</span><span class="s1">e&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e&#39;}</span><span class="s1">es&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e&#39;}</span><span class="s1">s&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e`}</span><span class="s1">rent&#39;</span><span class="w"> </span><span class="s1">&#39;er&#39;</span><span class="w"> </span><span class="s1">&#39;era&#39;</span><span class="w"> </span><span class="s1">&#39;erai&#39;</span>
<span class="w">            </span><span class="s1">&#39;eraIent&#39;</span><span class="w"> </span><span class="s1">&#39;erais&#39;</span><span class="w"> </span><span class="s1">&#39;erait&#39;</span><span class="w"> </span><span class="s1">&#39;eras&#39;</span><span class="w"> </span><span class="s1">&#39;erez&#39;</span><span class="w"> </span><span class="s1">&#39;eriez&#39;</span><span class="w"> </span><span class="s1">&#39;erions&#39;</span>
<span class="w">            </span><span class="s1">&#39;erons&#39;</span><span class="w"> </span><span class="s1">&#39;eront&#39;</span><span class="w"> </span><span class="s1">&#39;ez&#39;</span><span class="w"> </span><span class="s1">&#39;iez&#39;</span>

<span class="w">            </span><span class="c1">// &#39;ons&#39; //-best omitted</span>

<span class="w">                </span><span class="p">(</span><span class="ow">delete</span><span class="p">)</span>

<span class="w">            </span><span class="s1">&#39;</span><span class="se">{a^}</span><span class="s1">mes&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{a^}</span><span class="s1">t&#39;</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{a^}</span><span class="s1">tes&#39;</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="w"> </span><span class="s1">&#39;ai&#39;</span><span class="w"> </span><span class="s1">&#39;aIent&#39;</span><span class="w"> </span><span class="s1">&#39;ait&#39;</span><span class="w"> </span><span class="s1">&#39;ant&#39;</span>
<span class="w">            </span><span class="s1">&#39;ante&#39;</span><span class="w"> </span><span class="s1">&#39;antes&#39;</span><span class="w"> </span><span class="s1">&#39;ants&#39;</span><span class="w"> </span><span class="s1">&#39;as&#39;</span><span class="w"> </span><span class="s1">&#39;asse&#39;</span><span class="w"> </span><span class="s1">&#39;assent&#39;</span><span class="w"> </span><span class="s1">&#39;asses&#39;</span><span class="w"> </span><span class="s1">&#39;assiez&#39;</span>
<span class="w">            </span><span class="s1">&#39;assions&#39;</span>
<span class="w">                </span><span class="p">(</span><span class="w"> </span><span class="ow">try</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="w"> </span><span class="n">RV</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="ow">delete</span><span class="w"> </span><span class="p">)</span>

<span class="w">            </span><span class="s1">&#39;ais&#39;</span><span class="w"> </span><span class="s1">&#39;aise&#39;</span><span class="w"> </span><span class="s1">&#39;aises&#39;</span>
<span class="w">                </span><span class="p">(</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kr">among</span><span class="w"> </span><span class="p">(</span>
<span class="w">                      </span><span class="s1">&#39;al&#39;</span><span class="w">     </span><span class="c1">// balais, calais, galais, malais, palais, valais</span>
<span class="w">                          </span><span class="p">(</span><span class="ow">next</span><span class="w"> </span><span class="ow">atlimit</span><span class="p">)</span>
<span class="w">                      </span><span class="s1">&#39;auv&#39;</span><span class="w">    </span><span class="c1">// mauvais</span>
<span class="w">                      </span><span class="s1">&#39;</span><span class="se">{e&#39;}</span><span class="s1">pl&#39;</span><span class="w"> </span><span class="c1">// déplais</span>
<span class="w">                          </span><span class="p">()</span>
<span class="w">                  </span><span class="p">)</span>
<span class="w">                  </span><span class="ow">delete</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="s1">&#39;eais&#39;</span>
<span class="w">                </span><span class="p">(</span><span class="ow">delete</span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">keep_with_s</span><span class="w"> </span><span class="s1">&#39;aiou</span><span class="se">{e`}</span><span class="s1">s&#39;</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">residual_suffix</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="ow">try</span><span class="p">(</span><span class="o">[</span><span class="s1">&#39;s&#39;</span><span class="o">]</span><span class="w"> </span><span class="ow">test</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Hi&#39;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">non</span><span class="o">-</span><span class="n">keep_with_s</span><span class="p">)</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>
<span class="w">        </span><span class="ow">setlimit</span><span class="w"> </span><span class="ow">tomark</span><span class="w"> </span><span class="n">pV</span><span class="w"> </span><span class="ow">for</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="o">[</span><span class="ow">substring</span><span class="o">]</span><span class="w"> </span><span class="kr">among</span><span class="p">(</span>
<span class="w">                </span><span class="s1">&#39;ion&#39;</span><span class="w">           </span><span class="p">(</span><span class="n">R2</span><span class="w"> </span><span class="s1">&#39;s&#39;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;t&#39;</span><span class="w"> </span><span class="ow">delete</span><span class="p">)</span>
<span class="w">                </span><span class="s1">&#39;ier&#39;</span><span class="w"> </span><span class="s1">&#39;i</span><span class="se">{e`}</span><span class="s1">re&#39;</span>
<span class="w">                </span><span class="s1">&#39;Ier&#39;</span><span class="w"> </span><span class="s1">&#39;I</span><span class="se">{e`}</span><span class="s1">re&#39;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="s1">&#39;i&#39;</span><span class="p">)</span>
<span class="w">                </span><span class="s1">&#39;e&#39;</span><span class="w">             </span><span class="p">(</span><span class="ow">delete</span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">un_double</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="ow">test</span><span class="w"> </span><span class="kr">among</span><span class="p">(</span><span class="s1">&#39;enn&#39;</span><span class="w"> </span><span class="s1">&#39;onn&#39;</span><span class="w"> </span><span class="s1">&#39;ett&#39;</span><span class="w"> </span><span class="s1">&#39;ell&#39;</span><span class="w"> </span><span class="s1">&#39;eill&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">[</span><span class="ow">next</span><span class="o">]</span><span class="w"> </span><span class="ow">delete</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="kr">define</span><span class="w"> </span><span class="n">un_accent</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="ow">atleast</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">non</span><span class="o">-</span><span class="n">v</span>
<span class="w">        </span><span class="o">[</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e&#39;}</span><span class="s1">&#39;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;</span><span class="se">{e`}</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="s1">&#39;e&#39;</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">)</span>

<span class="kr">define</span><span class="w"> </span><span class="n">stem</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="ow">do</span><span class="w"> </span><span class="n">elisions</span>
<span class="w">    </span><span class="ow">do</span><span class="w"> </span><span class="n">prelude</span>
<span class="w">    </span><span class="ow">do</span><span class="w"> </span><span class="n">mark_regions</span>
<span class="w">    </span><span class="ow">backwards</span><span class="w"> </span><span class="p">(</span>

<span class="w">        </span><span class="ow">do</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">(</span>
<span class="w">                 </span><span class="p">(</span><span class="w"> </span><span class="n">standard_suffix</span><span class="w"> </span><span class="ow">or</span>
<span class="w">                   </span><span class="n">i_verb_suffix</span><span class="w"> </span><span class="ow">or</span>
<span class="w">                   </span><span class="n">verb_suffix</span>
<span class="w">                 </span><span class="p">)</span>
<span class="w">                 </span><span class="ow">and</span>
<span class="w">                 </span><span class="ow">try</span><span class="p">(</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="w">   </span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;i&#39;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="ow">or</span>
<span class="w">                        </span><span class="p">(</span><span class="s1">&#39;</span><span class="se">{cc}</span><span class="s1">&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="w"> </span><span class="p">)</span>
<span class="w">                 </span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span><span class="w"> </span><span class="ow">or</span>
<span class="w">            </span><span class="n">residual_suffix</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">        </span><span class="c1">// try([&#39;ent&#39;] RV delete) // is best omitted</span>

<span class="w">        </span><span class="ow">do</span><span class="w"> </span><span class="n">un_double</span>
<span class="w">        </span><span class="ow">do</span><span class="w"> </span><span class="n">un_accent</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="ow">do</span><span class="w"> </span><span class="n">postlude</span>
<span class="p">)</span>
</pre></div>


        </div><!-- /.col-lg-10 -->
      </div><!-- /.row -->
    </div><!-- /.container -->

    <div class="container">
      <footer class="footer">
        <p>
          <a href="/lists.html">Write to our mailing list</a> if you have comments or questions about the project.
        </p>
      </footer>
    </div> <!-- /container -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>
